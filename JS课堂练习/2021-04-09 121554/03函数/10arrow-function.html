<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>箭头函数表达式</title>
</head>

<body>

<script>
  //1.基本含义
  // 1-1声明一个变量f，存储箭头函数表达式(即引用)
  //函数形参为a，函数体为console.log(a)
  //调用f引用的函数，并传递实参3
  let f= (a) => {
    console.log(a);
  }
  //let f= a => console.log(a);
  f(3);
  // 1-2 在赋值符右侧写一个箭头函数表达式(即引用)
  //函数体为返回1
  let f1= ()  => {
    return 1;
  }
  //let f1=()=>1
  console.log(f1());
  // 1-3 在赋值符右侧写一个箭头函数表达式(即引用)
  // 函数形参为n，函数体为返回n+1
  let f2= (n) => {
    return n+1;
  }
  //let f2= n=>n+1;
  console.log(f2(6));

  //2.作为对象的方法
  let obj= { 
    property: '对象的方法',
    //在冒号右侧写出箭头函数表达式，函数体为在控制台输出property属性
    //【注意】箭头函数this继承外层作用域的this值，不表示所在的当前对象，
    //因此箭头函数体有this，不适合当对象的方法，无this时可做对象方法。
    //method: () => { console.log(this.property); }
    //method: () =>  console.log(this.property) //undefined
    method:function(){
      console.log(this.property);
    }
  };
  obj.method();

  //3.作为函数的实参：异步回调函数
  //在，号后写出箭头函数表达式，在控制台输出“document对象的click事件的回调函数”
  document.addEventListener('click',()=>{
    console.log('document对象的click事件的回调函数');
  });

  //4.作为函数实参，高阶函数  ,同步回调
  let arr= ['red', 'green'];
  //4-1在map的实参处写出箭头函数表达式，箭头函数表达式形参为element，
  //函数体为return element.length
  let arr1= arr.map((element)=>{
    return element.length;
  } );
  //>>arr1
  //  Array [ 3, 5 ]
  //4-2用简写形式写出
  let arr2= arr.map( element => element.length );
  //>>arr2
  //  Array [ 3, 5 ]


  //5.用箭头函数表达式语法写出立即调用函数表达式，包裹下面的代码
  (()=>{
    var now = new Date();
    if(now.getMonth()==3 && now.getDate()==9){
      document.body.innerHTML= "自嗨节";
    }
  })(); 
  
  //6.用箭头函数表达式写闭包。i=0表示形参默认值
  
  let addOne = (i=0) => {
    return () => (++i);
  };
  let v = addOne();
  v();           //1
  v();           //2

  //因为仅有一个返回值，return也可以省略 简写
  addOne = (i=0)=> ()=> (++i);
</script>

</body>
</html>
