<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>内存管理-垃圾回收</title>
<script>
//当10~15行的代码块执行后，i是否还在内存中？
//当第16行的代码执行完，f1是否还在内存中？
let f1;
{
  let i= 1;
  f1= function(){
    console.log(1);
  }
}
f1();

//当22~28行代码执行后，
//i是否还在内存中？全局作用域能否访问i？相当于闭包
//j是否还在内存中？
let f2;
{
  let i= 1;
  let j= 3;
  f2= function (){
    console.log(i);
  }
}
f2();

</script>
</head>

<body>
<p>自2012年起，各浏览器(IE8)使用“标记-清除算法”或其改良版来完成程序内存垃圾回收。</p>
<h3>标记-清除算法</h3>
<p>垃圾回收器会定期查找全局对象(window)、全局变量、全局函数引用的所有“对象”(函数、对象)，然后查找这些“对象”引用的所有“对象”，一直找到末端，标记所有可访问的“对象”和收集所有不可访问的“对象”，最后清除不可访问的对象。</p>
<p>【注意】其中函数引用的“对象”还包括存储原始值得变量。</p>
<p>【总结】垃圾回收器从全局作用域开始查找并将所有“对象”标记为可访问的“对象”和不可访问的“对象”，清除不可访问的“对象”。</p>
</h3>
</body>
</html>
